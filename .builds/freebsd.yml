image: freebsd/12.x
packages:
  - cmake
  - sudo
  - curl
  - pugixml
  - upnp
  - duktape-lib
  - spdlog
  - magic
  - taglib
  - ffmpeg
  - ffmpegthumbnailer
  - libexif
  - libmatroska
sources:
  - https://github.com/gerbera/gerbera
tasks:
  - build: |
      mkdir build
      cd build
      cmake ../gerbera -DWITH_INOTIFY=0 -DWITH_MAGIC=1 -DWITH_MYSQL=0 -DWITH_CURL=1 -DWITH_JS=1 \
      -DWITH_TAGLIB=1 -DWITH_AVCODEC=1 -DWITH_FFMPEGTHUMBNAILER=1 \
      -DWITH_EXIF=1 -DWITH_LASTFM=0 -DWITH_SYSTEMD=0 -DWITH_DEBUG=1
      make -j2
      sudo make install